{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?105b","webpack:///./src/libs/bodyNode.js","webpack:///./src/App.vue","webpack:///./src/components/Graph.vue","webpack:///./src/libs/jsonFSA.js","webpack:///./src/libs/projFSA.js","webpack:///./src/components/Graph.vue?f58a","webpack:///./src/App.vue?eabf","webpack:///./src/main.js","webpack:///./src/components/Graph.vue?5943","webpack:///./src/libs/execJson.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","build","logic","ouputChains","template","console","log","JSON","stringify","entries","state","ev","trans","output","e","fatal","message","stack","id","class","ref","style","title","autofocus","type","placeholder","href","newGraph","openGraph","saveGraph","execJSON","nodejsCODE","showModal","graphExport","sellRemove","hideModal","stateType","newState","checked","selColor","transSrc","transDst","srcOptions","option","text","dstOptions","newTrans","newAction","onLoad","$event","jsonAction","code","this","pattern","func","jsonTrans","nextstate","nextstatename","triggers","effects","jsonState","transDict","exits","transitions","stays","link","superstate","item","find","obj","undefined","action","transition","translst","parse","jsonFSA","project","prj","complete","start","stop","countstates","states","statesDict","stroke","letters","color","Math","floor","random","projFSA","_prjname_","_extension_","file","handle","reader","FileReader","readAsText","onload","onerror","error","context","filename","fname","File","FileSaver","saveAs","uml","joint","selected","fsaJSON","fsaPROJ","created","self","graph","Graph","cellNamespace","on","cell","fsa","owner","remtrans","deltrans","delstate","attributes","source","changeTransSrc","changeTransDst","mounted","paper","Paper","el","$refs","width","clientWidth","height","clientHeight","gridSize","model","cellViewNamespace","snapLabels","interactive","linkMove","labelMove","arrowheadMove","vertexMove","vertexAdd","vertexRemove","useLinkTools","cellView","attr","rect","fill","more","innerText","showhide","eventObject","eventX","eventY","watch","computed","methods","save","genColor","palette","clear","reset","projectinput","click","target","files","size","read","dafsm","debug","restoreGraph","getSelectedItem","remove","showlist","hidelist","forEach","arr","elems","document","querySelectorAll","display","showDAFSM","open","write","elem","actiontype","dialog","actionType","updateStateList","actionName","addAction","stateName","setAttribute","makeState","fsaState","delta","StartState","position","x","y","attrs","addstate","EndState","State","events","addCell","vertices","transName","trigger","effect","effectName","makeTrans","src","dst","event","srcState","dstState","label","Transition","labels","distance","offset","indexOf","args","keepGradient","ensureLegibility","fontWeight","fsaTrans","addtrans","addtrigger","addeffect","actname","actfunc","objItem","set","addentry","addstay","addexit","newTargetID","newTarget","getCell","newSourceID","newSource","oldOwnerKey","newOwnerKey","fsaOldSource","fsaNewSource","removedTranKey","remTrans","Array","isArray","clonetrans","restoreState","typeState","substring","restoreTrans","dstKey","modelTrans","warn","render","__scopeId","components","createApp","App","mount","validTransition","trig","input","eff","validArrayStates","ejstates","validObjectStates"],"mappings":"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","file":"js/app.36e1cd93.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dafsmGraph/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=322c0829&lang=scss\"","module.exports = {\n    build: (logic) => {\n        let ouputChains = ''\n        let template = `\n        const fsmLogic = require('./manual.json');\n        const { serviceContent, serviceDeploy } = require('@vcomm/asmcore');`\n\n        console.log(`Logic:`,JSON.stringify(logic))\n        try {\n            template += `\n            class serviceManager extends serviceDeploy {\n                constructor() {\n                    super();\n                }            \n            `\n            \n            for (let [key, state] of Object.entries(logic['states'])) {\n                for (let [ev, trans] of Object.entries(state['transitions'])) {\n                    console.log(`State[${key}]->Trans[${ev}]`,trans)\n                    ouputChains += `this.emitOn('${trans.output}',[(cntx)=>cntx.setState(cntx.getNextSate()),(cntx)=>cntx.unlock()],this.content);`\n                }\n            }\n            \n            template += `initLogic() { ${ouputChains} }`\n            template += `}`\n        } catch(e) {\n            console.fatal(`Build body node.js template: in ${logic[\"id\"]} >` + e.name + \":\" + e.message + \"\\n\" + e.stack)\n        } finally {\n            return template\n        }         \n    }\n};","<template>\n  <div id=\"app\">\n    <Graph >\n    </Graph>  \n  </div>\n</template>\n\n<script>\nimport Graph from './components/Graph.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    Graph\n  }\n}\n</script>\n\n<style lang=\"scss\">\n$fa-font-path: \"~@fortawesome/fontawesome-free/webfonts\";\n@import \"~@fortawesome/fontawesome-free/scss/fontawesome\";\n@import \"~@fortawesome/fontawesome-free/scss/solid\"; // fas\n@import \"~@fortawesome/fontawesome-free/scss/regular\"; // far\n@import \"~@fortawesome/fontawesome-free/scss/brands\"; // fab\n\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin: 10px;\n}\n\n</style>\n","<template>\n  <div>  \n    <nav>\n        <div class=\"dropdown\">\n            <button class=\"btn\">[ File ] \n                <i class=\"fa fa-caret-down\"></i>\n            </button>\n            <div class=\"dropdown-content\">\n                <a href=\"#\" @click=\"newGraph()\"><i class=\"fas fa-folder-plus\"></i> New</a>\n                <a href=\"#\" @click=\"openGraph()\"><i class=\"fas fa-folder-open\"></i> Open</a>\n                <a href=\"#\" @click=\"saveGraph()\"><i class=\"fas fa-save\"></i> Save</a>\n            </div>\n        </div> \n        <div class=\"dropdown\">\n            <button class=\"btn\">[ Build ] \n                <i class=\"fa fa-caret-down\"></i>\n            </button>\n            <div class=\"dropdown-content\">\n                <a href=\"#\" @click=\"execJSON()\"><i class=\"fas fa-code\"></i> Execute JSON</a>\n                <a href=\"#\" @click=\"nodejsCODE()\"><i class=\"fab fa-node-js\"></i> Code Template</a>\n            </div>\n        </div>\n        <button class=\"btn\"\n            @click=\"showModal('State')\"\n        ><i class=\"fas fa-project-diagram\"></i> State</button>\n        <button class=\"btn\"\n            @click=\"showModal('Trans')\"\n        ><i class=\"fas fa-exchange-alt\"></i> Trans</button>\n        <div class=\"dropdown\">\n            <button class=\"btn\">[ <b ref=\"more\">Paper</b> ] \n                <i class=\"fa fa-caret-down\"></i>\n            </button>\n            <div class=\"dropdown-content\">\n                <a href=\"#\" class=\"paper\" @click=\"showModal('State')\"><i class=\"fas fa-project-diagram\"></i>   new State</a>\n                <a href=\"#\" class=\"paper\" @click=\"showModal('Trans')\"><i class=\"fas fa-exchange-alt\"></i>   new Trans</a>\n                <a href=\"#\" class=\"paper\" @click=\"graphExport()\"><i class=\"fas fa-list\"></i> Export Graph</a>\n                <!--<a href=\"#\" class=\"paper\" @click=\"showDAFSM()\"><i class=\"fas fa-list\"></i> show DAFSM</a>-->\n\n                <a href=\"#\" class=\"state\" style=\"display:none\" @click=\"sellRemove()\"><i class=\"fas fa-trash\"></i>   del State</a>\n                <a href=\"#\" class=\"state init\" style=\"display:none\" @click=\"showModal('Action','entries')\"><i class=\"fas fa-sign-in-alt\"></i>   add Entry</a>\n                <a href=\"#\" class=\"state final\" style=\"display:none\" @click=\"showModal('Action','exits')\"><i class=\"fas fa-sign-out-alt\"></i>   add Exit</a>\n                <a href=\"#\" class=\"state init final\" style=\"display:none\" @click=\"showModal('Action','stays')\"><i class=\"fas fa-recycle\"></i>   add Stay</a>\n\n                <a class=\"trans\" href=\"#\" style=\"display:none\" @click=\"sellRemove()\"><i class=\"fas fa-trash\"></i>   del Trans</a>\n                <a class=\"trans\" href=\"#\" style=\"display:none\" @click=\"showModal('Action','triggers')\"><i class=\"fas fa-bolt\"></i>   add Trigger</a>\n                <a class=\"trans\" href=\"#\" style=\"display:none\" @click=\"showModal('Action','effects')\"><i class=\"fab fa-buffer\"></i>   add Effect</a>\n            </div>\n        </div> \n    </nav>\n    <div class=\"container\" ref=\"joint\"/>\n\n    <div id=\"dialog\" class=\"modal\" ref=\"dialog\">\n    <div class=\"modal-dialog\">\n      <!-- Modal content -->\n      <div class=\"modal-content\">\n        <span id=\"closeModal\" class=\"close\"\n            @click=\"hideModal()\"\n        >&times;</span>\n    \n      <div id=\"State\" ref=\"State\" style=\"display:none\">\n        <input autofocus=\"autofocus\" class=\"modal-enter\" id=\"stateName\" ref=\"stateName\" v-bind:placeholder=\"[stateType === 'initialState' ? 'init' : stateType === 'finalState' ? 'final' : 'choose a state name']\" type=\"text\">\n        <button id=\"confirmState\" class=\"modal-enter\"\n            @click=\"newState()\"\n        >Confirm</button> \n        <p/><label style=\"margin-left: -100px;\"><b>Type: </b></label>\n        <input type=\"radio\" name=\"stateType\" value=\"initialState\" v-model=\"stateType\">Start\n        <input type=\"radio\" name=\"stateType\" value=\"finalState\" v-model=\"stateType\">End\n        <input type=\"radio\" name=\"stateType\" value=\"regularState\" v-model=\"stateType\" checked>Regular\n        <span @click=\"selColor()\" style=\"margin-left:70px;\"><i class=\"fas fa-palette fa-2x\" style=\"color:red;\" ref=\"palette\" title=\"click for change color\"></i></span>\n      </div>\n    \n      <div id=\"Trans\" ref=\"Trans\" style=\"display:none\">  \n        <label style=\"margin-left: -100px;\"><b>Trigger Name: </b></label> \n        <input autofocus=\"autofocus\" class=\"modal-enter\" ref=\"transName\" v-bind:placeholder=\"`${transSrc}=>T=>${transDst}`\" type=\"text\"><p/>\n        <label style=\"margin-left: -100px;\"><b>Effect Name: </b></label> \n        <input autofocus=\"autofocus\" class=\"modal-enter\" ref=\"effectName\" type=\"text\"><p/>\n        <label style=\"margin-left: -100px;\"><b>Transition Src: </b></label>      \n        <select id=\"fromState\" v-model=\"transSrc\" class=\"modal-enter\">\n            <option v-bind:key=\"option.id\" \n                    v-for=\"option in srcOptions\" \n                    v-bind:value=\"option.value\">\n                {{ option.text }}\n            </option>\n        </select><p/>\n        <label style=\"margin-left: -100px;\"><b>Transition Dst: </b></label>\n        <select id=\"toState\" v-model=\"transDst\" class=\"modal-enter\">\n            <option v-bind:key=\"option.id\" \n                    v-for=\"option in dstOptions\" \n                    v-bind:value=\"option.value\">\n                {{ option.text }}\n            </option>\n        </select><p/>\n        <button id=\"confirmTrans\" class=\"modal-enter\"\n            @click=\"newTrans()\"\n        >Confirm</button>\n      </div>\n\n      <div id=\"Action\" ref=\"Action\" style=\"display:none\">\n        <input autofocus=\"autofocus\" class=\"modal-enter\" id=\"actionName\" ref=\"actionName\" placeholder=\"choose a action name\" type=\"text\">\n        <button id=\"confirmAction\" class=\"modal-enter\"\n            @click=\"newAction()\"\n        >Confirm</button>          \n      </div>    \n  \n      </div>\n    </div>\n      <input id=\"projectinput\" ref=\"projectinput\" @change=\"onLoad($event)\" type=\"file\" style=\"display:none;\" />\n    </div>\n  </div>  \n</template>\n\n<script>\nimport * as joint from 'jointjs'\nimport \"jointjs/dist/joint.css\"\n//import Component from 'vue-class-component'\nimport { jsonFSA } from '../libs/jsonFSA'\nimport projFSA from '../libs/projFSA'\nimport execJson from '../libs/execJson'\nimport bodyNode from '../libs/bodyNode'\n\n//@Component\nexport default /*class umlFsm extends jsonFSA*/ {\n    name: 'Graph',\n\n    data() {\n        return {\n            uml : joint.shapes.uml, \n            selected: null,\n            fsaJSON : new jsonFSA('tst','prj'),\n            fsaPROJ : new projFSA('myproj'),\n            stateType: 'regularState',\n            transSrc: undefined,\n            srcOptions: [],\n            transDst: undefined,\n            dstOptions: []\n        }\n    },\n\n\tcreated() {\n        const self = this\n\t\tthis.graph = new joint.dia.Graph({}, { cellNamespace: joint.shapes });\n        this.graph.on('remove', (cell) => {\n            let fsa = self.fsaJSON.get()\n            switch (cell.fsa.type) {\n            case 'trans':\n              const owner = cell.fsa.owner.pattern\n              const remtrans = cell.fsa.item.get().key\n              console.log(`Remove from Owner ${JSON.stringify(cell.fsa.owner)} Transition: ${JSON.stringify(cell.fsa.item.get())}`);\n              cell.fsa.owner.deltrans(cell.fsa.item.get().key)\n              if (fsa.states.hasOwnProperty(owner.key)) {\n                if (fsa.states[owner.key].hasOwnProperty(\"transitions\")) {\n                    const translst = fsa.states[owner.key].transitions  \n                    for(var i = 0; i < translst.length; i++) {\n                        const trans = translst[i]\n                        if(trans.key === remtrans) {\n                           translst.splice(i, 1)\n                      }\n                    }\n                }\n              }\n              break;\n            case 'state':\n              const key = cell.fsa.item.get().key  \n              console.log('Remove State: ',cell.fsa.item.get());  \n              self.fsaJSON.delstate(key)\n              if (fsa.states.hasOwnProperty(key)) {\n                  delete fsa.states[key]\n                  //fsa.countstates -- \n              }              \n              break;\n            }\n        });\n        this.graph.on('change:source', (trans) => {\n            if (trans.attributes.source.id)\n                self.changeTransSrc(trans)\n        });          \n        this.graph.on('change:target', (trans) => { \n            self.changeTransDst(trans)\n        });\n\t},\n\n    mounted() {\n        const self = this;\n        this.paper = new joint.dia.Paper({\n            el: this.$refs.joint,\n            width: this.$refs.joint.clientWidth,\n            height: this.$refs.joint.clientHeight,\n            gridSize: 1,\n            model: this.graph,\n            cellViewNamespace: joint.shapes,\n            snapLabels: true,\n            interactive: {\n                linkMove: true,\n                labelMove: true,\n                arrowheadMove: true,\n                vertexMove: true,\n                vertexAdd: true,\n                vertexRemove: true,\n                useLinkTools: true\n            }\n        });       \n\n        this.paper.on('cell:pointerdown',(cellView)=>{\n//            console.log(`cell:pointerdown`, this.fsaJSON.get())\n            if (self.selected) \n                self.selected.attr({\n                    rect: { fill: 'rgba(48, 208, 198, 0.1)' },\n                    text: { fill: 'black', 'font-size': 15 }\n                });\n            cellView.model.attr({\n              rect: { fill: 'yellow' },\n              text: { fill: 'black', 'font-size': 15 }\n            });\n            self.selected  = cellView.model;\n            if (self.selected.fsa.type === 'state') {\n                this.$refs.more.innerText = 'State'\n                self.showhide(['.state'],['.paper','.trans'])\n                if (self.selected.fsa.item.pattern.key === 'init')\n                    self.showhide([],['.init'])\n                if (self.selected.fsa.item.pattern.key === 'final')\n                    self.showhide([],['.final'])\n            } else if (self.selected.fsa.type === 'trans') {\n                this.$refs.more.innerText = 'Trans'\n                self.showhide(['.trans'],['.paper','.state'])\n            } else {\n                self.showhide([],['.paper','.state','.trans'])    \n            }\n            console.log('selected '+self.selected.fsa.type,self.selected.fsa.item)\n            //$('code#selectedItem').text(self.selected.fsa.item.pattern.key)\n        });\n        this.paper.on('blank:pointerdown', ()=>{\n//            console.log(`blank:pointerdown`)\n            if(self.selected) {\n                self.selected.attr({\n                    rect: { fill: 'rgba(48, 208, 198, 0.1)' },\n                    text: { fill: 'black', 'font-size': 15 }\n                });\n                self.selected  = null;\n                self.showhide(['.paper'],['.state','.trans'])\n                console.log('Reset All')\n                this.$refs.more.innerText = 'Paper'\n                //$('code#selectedItem').text('Not Selected')\n            }\n        });\n        this.paper.on('cell:pointerclick', (cellView, eventObject, eventX, eventY)=>{\n            console.log(`cell:pointerclick - x[${eventX}], y[${eventY}]`)\n        }); \n        this.paper.on('cell:pointerdblclick', (cellView)=>{\n            console.log('Show State:',cellView.model.fsa.item.get());\n        });        \n        this.paper.on('element:contextmenu', (cellView)=>{\n            console.log('Rigth Click Context Menu:');\n        })       \n    },\n\n    watch: {\n\n    },\n    \n    computed: {\n\n    },\n\n    methods: { \n        async graphExport() {\n\n        },\n        async execJSON() {\n            const suid = 'test'\n/*\n            const response = await fetch(`/code/json/${suid}`,{\n                method: 'POST',      \n                headers: {\n                'Content-Type': 'application/json'\n                },     \n                body: JSON.stringify(this.fsaJSON.get())     \n            })\n            const data = await response.json()\n*/\n            const data = execJson.build(this.fsaJSON.get())\n            console.log(`Execute JSON:`,data)\n            this.fsaPROJ.save(JSON.stringify(data),'exec.json')\n        },\n        async nodejsCODE() {\n            const suid = 'test'\n/*            \n            const response = await fetch(`/code/nodejs/${suid}`,{\n                method: 'POST',      \n                headers: {\n                'Content-Type': 'application/json'\n                },     \n                body: JSON.stringify(this.fsaJSON.get())     \n            })\n            const data = await response.text()\n*/\n            const data = bodyNode.build(execJson.build(this.fsaJSON.get()))\n            console.log(`Node.js code template:`,data)\n            this.fsaPROJ.save(data,'code.js')\n        },\n        selColor() {\n            const color = this.fsaJSON.genColor()\n            console.log(`Color:`,color)\n            this.$refs.palette.style.color = color\n        },\n        genColor() {\n            return this.fsaJSON.genColor()\n        },\n        newGraph() {\n            this.graph.clear(); \n            this.fsaJSON.reset();\n            console.log(`Start new graph`)\n        },\n        openGraph() {\n            this.$refs.projectinput.click()\n        },\n        onLoad(e) {\n            const file = e.target.files[0]\n            console.log(`Load Project File: ${file.name}, size: ${file.size}`)\n            this.fsaPROJ.read(file,(result)=>{\n                const dafsm = JSON.parse(result)\n                console.debug(`Read Project: `,dafsm)\n                this.restoreGraph(dafsm.states)\n            })\n\n        },\n        saveGraph() {\n            this.fsaPROJ.save(JSON.stringify(this.fsaJSON.get()))\n        },\n        getSelectedItem() {\n            if(this.selected)\n                return { type: this.selected.fsa.type, name: this.selected.fsa.item.pattern.key }\n            else\n                return null\n        },\n        sellRemove() {\n            if(this.selected) this.selected.remove();\n        },\n        showhide(showlist,hidelist) {\n            showlist.forEach(function(item, i, arr) {\n                const elems = document.querySelectorAll(item)\n                for ( i = 0; i < elems.length; i++)\n                      elems[i].style.display = \"block\";\n            });    \n            hidelist.forEach(function(item, i, arr) {\n                const elems = document.querySelectorAll(item)\n                for ( i = 0; i < elems.length; i++)\n                      elems[i].style.display = \"none\";\n            });            \n        },\n        showDAFSM() {\n            console.log('DAFSM:',this.fsaJSON.get());\n            const dafsm = window.open(\"_blank\");\n            dafsm.document.write(JSON.stringify(this.fsaJSON.get()));\n        },\n        showModal(elem,actiontype) {\n            this.$refs.dialog.style.display = \"block\"\n            this.$refs[elem].style.display = \"block\"\n            this.actionType = actiontype\n            this.updateStateList()\n        },\n        hideModal() {\n            this.$refs['State'].style.display = \"none\"\n            this.$refs['Trans'].style.display = \"none\"\n            this.$refs['Action'].style.display = \"none\"\n            this.$refs.dialog.style.display = \"none\"\n        },\n        updateStateList() {\n            this.srcOptions = [];\n            this.dstOptions = [];\n            for (var s in this.fsaJSON.get().states) {\n                console.log(\"Update state list\",s);\n                this.srcOptions.push({id: s, text:s, value:s});\n                this.dstOptions.push({id: s, text:s, value:s});\n            }\n        },\n        newAction() {\n            const actionName = this.$refs.actionName.value;\n\n            this.addAction(this.actionType,actionName)\n            this.hideModal()\n        },\n        newState() {\n            const type = this.stateType;\n//            const stateName = this.$refs.stateName.value; \n            const stateName = (this.stateType === 'initialState') ? 'init' : \n                              (this.stateType === 'finalState') ? 'final' : this.$refs.stateName.value;    \n\n            console.log(`New State: ${stateName} [${type}]`)    \n            if (this.fsaJSON.get().states[stateName]) {\n                this.$refs.stateName.value = ''\n                this.$refs.stateName.setAttribute('placeholder', \"state[ \"+stateName+\"] exist - choose other name\") \n                console.log(\"state[ \"+stateName+\"] exist - choose other name\");\n                return;\n            }            \n            this.makeState(type,stateName)\n            this.hideModal()\n        },\n        makeState(type,stateName) {\n            let uml = this.uml\n            let fsa = this.fsaJSON.get() \n            let state = null, fsaState = null;\n            const delta = (10*fsa.countstates)\n\n            switch(type) {\n                case 'initialState':\n                    state = new uml.StartState({\n                        position: { x:150  , y: 20 },\n                        size: { width: 30, height: 30 },\n                        attrs: {\n                            'circle': {\n                            fill: '#4b4a67',\n                            stroke: 'none'\n                            }\n                        }\n                    });\n                    fsaState = this.fsaJSON.addstate('init','init'/*stateName*/,type)\n                    fsa['states']['init'] = fsaState.pattern\n                    break;\n                case 'finalState':\n                    state = new uml.EndState({\n                        position: { x:750  , y: 550 },\n                        size: { width: 30, height: 30 },\n                        attrs: {\n                            '.outer': {\n                            stroke: \"#4b4a67\",\n                            'stroke-width': 2\n                            },\n                            '.inner': {\n                            fill: '#4b4a67'\n                            }\n                        }\n                    });\n                    fsaState = this.fsaJSON.addstate('final','final'/*stateName*/,type)\n                    fsa['states']['final'] = fsaState.pattern\n                    break;\n                default:\n                    const color = this.$refs.palette.style.color //this.fsaJSON.genColor()\n                    state = new uml.State({\n                        position: { x:500+delta, y:50+delta },\n                        size: { width: 150, height: 80 },\n                        name: stateName,\n                        events: ['{\"entries\":0}','{\"stays\":0}','{\"exits\":0}'],\n                        attrs: {\n                            '.uml-state-body': {\n                            fill: 'rgba(48, 208, 198, 0.1)',\n                            //stroke: '#4b4a67',\n                            //stroke: this.stroke[this.get().countstates],\n                            stroke: color,\n                            'stroke-width': 3.0\n                            },\n                            '.uml-state-separator': {\n                            //stroke: '#4b4a67'\n                            //stroke: this.stroke[this.get().countstates],\n                            stroke: color\n                            }\n                        }                    \n                    });\n                    fsaState = this.fsaJSON.addstate(stateName,stateName,type)\n                    fsa['states'][stateName] = fsaState.pattern\n            }\n\n            fsaState.get().model = state\n            state.fsa = { type: 'state', item: fsaState}\n            this.graph.addCell(state)   \n            console.log(`${stateName}[${state.id}]`,state)   \n        },\n        newTrans() {\n            let vertices = undefined\n            if (!this.transSrc || !this.transDst) {\n                this.$refs.transName.value = ''\n                this.$refs.transName.setAttribute('placeholder', \"please select transition source & destination\") \n                console.log(\"please fill all fields and select side\");\n                return;\n            } else if (this.transSrc === this.transDst) {\n                vertices = [{\"x\": 513,\"y\": 309},{\"x\": 637,\"y\": 308},{\"x\": 636,\"y\": 221}]\n                /*\n                this.$refs.transName.value = ''\n                this.$refs.transName.setAttribute('placeholder', \"Wrong: selected src and dst is same state, please select one other and after change trans dst\") \n                console.log(\"selected src and dst is same state, please select one other and after change trans dst\");\n                return;   \n                */         \n            }\n            const trigger = this.$refs.transName.value\n            const effect  = this.$refs.effectName.value\n            this.makeTrans(this.transSrc,this.transDst,trigger,effect,vertices)\n            this.hideModal()\n        },\n        makeTrans(src,dst,event,output,vertices) {\n            let uml = this.uml\n            let fsa = this.fsaJSON.get() \n            const transName = `${src}=>[${event}/${output}]=>${dst}`\n            const srcState = fsa.states[src]\n            const dstState = fsa.states[dst]\n            const label = event ? `${event}/${output}` : transName\n            \n            let trans = new uml.Transition({\n                source: { id: srcState.model.id },\n                target: { id: dstState.model.id },\n                attrs: {'.connection': {\n                    'fill': 'none',\n                    'stroke-linejoin': 'round',\n                    'stroke-width': '2',\n                    'stroke': (src === 'init') ? \"#4b4a67\" : srcState.model.attributes.attrs['.uml-state-body'].stroke\n                    },\n                    '.marker-arrowheads': {\n                        display: 'none'\n                    }\n                },\n                labels: [{\n                    position: {\n                        distance: 0.5,\n                        offset: (label.indexOf('\\n') > -1 || label.length === 1) ? 0 : 10,\n                        args: {\n                            keepGradient: true,\n                            ensureLegibility: true\n                        }\n                    },\n                    attrs: {\n                        text: {\n                            text: label,\n                            fontWeight: 'bold'\n                        }\n                    }\n                }],\n                vertices: vertices || []            \n            });     \n            /*\n            let trans = this.transLink(srcState.model, dstState.model, \n                srcState.model.attributes.attrs['.uml-state-body'].stroke, label)\n            */\n            let fsaTrans = srcState.model.fsa.item.addtrans(transName,dstState.key)\n            if (event) fsaTrans.addtrigger(event,'')\n            if (output) fsaTrans.addeffect(output,'')\n            fsaTrans.get().model = trans\n            trans.fsa = { type: 'trans', item: fsaTrans, owner: srcState.model.fsa.item}\n            this.graph.addCell(trans);\n            console.log(`${src}[${srcState.model.id}] => ${dst}[${dstState.model.id}]`,trans)  \n        },\n        addAction(type,actname,actfunc) {\n            const item = this.getSelectedItem()\n            if (!item) return\n            const objItem = this.selected.fsa.item\n            switch(item.type) {\n                case 'state':       \n                    let events = this.selected.get('events')\n                    switch (type) {\n                        case 'entries':\n                            if (events) {\n                                let entries = JSON.parse(events[0])\n                                entries.entries++\n                                this.selected.set('events', [JSON.stringify(entries),events[1],events[2]])\n                            }\n                            objItem.addentry(actname,actfunc || 'return')\n                            break;\n                        case 'stays':\n                            if (events) {\n                                let stays = JSON.parse(events[1])\n                                stays.stays++\n                                this.selected.set('events', [events[0],JSON.stringify(stays),events[2]])\n                            }\n                            objItem.addstay(actname,actfunc || 'return')\n                            break;\n                        case 'exits':\n                            if (events) {\n                                let exits = JSON.parse(events[2])\n                                exits.exits++\n                                this.selected.set('events', [events[0],events[1],JSON.stringify(exits)])   \n                            }  \n                            objItem.addexit(actname,actfunc || 'return')           \n                            break;    \n                    } \n                    break;\n                case 'trans':\n                    switch (type) {\n                        case 'triggers':\n                            objItem.addtrigger(actname,actfunc || 'return true')\n                            break;\n                        case 'effects':\n                            objItem.addeffect(actname,actfunc || 'return')\n                            break;    \n                    }\n                    break; \n            }      \n        },\n        changeTransDst(trans) {\n            if (trans.attributes.target.id) {\n                const newTargetID = trans.attributes.target.id\n                const newTarget = trans.graph.getCell(newTargetID)\n                trans.fsa.item.pattern.key = `T:${trans.fsa.owner.pattern.key}=>${newTarget.fsa.item.pattern.key}`\n                trans.fsa.item.pattern.nextstatename = newTarget.fsa.item.pattern.key\n                console.log(`target of the link changed to ${trans.fsa.item.pattern.nextstatename}:`,trans,newTarget);\n                console.log(`updated FSA`,this.get().states)\n            }\n        },\n        changeTransSrc(trans) {\n            const newSourceID = trans.attributes.source.id\n            const newSource   = trans.graph.getCell(newSourceID)\n            const oldOwnerKey = trans.fsa.owner.pattern.key\n            const newOwnerKey = newSource.fsa.item.pattern.key\n            if (oldOwnerKey !== newOwnerKey) {\n                const fsaOldSource = this.get().states[oldOwnerKey]\n                const fsaNewSource = this.get().states[newOwnerKey]\n                const removedTranKey = trans.fsa.item.pattern.key\n                let remTrans = fsaOldSource.model.fsa.item.deltrans(removedTranKey)\n                if (Array.isArray(remTrans)) {\n                    remTrans = remTrans[0]\n                    remTrans.key = `T:${newOwnerKey}=>${trans.fsa.item.pattern.nextstatename}`\n                    fsaNewSource.model.fsa.item.clonetrans(remTrans/*trans.fsa.item.pattern*/)\n                    trans.fsa.item.pattern.key = remTrans.key\n                    trans.fsa.owner = fsaNewSource.model.fsa.item\n                    console.log(`source of the link changed and updated FSA`,this.get().states)\n                } else {\n                    trans.remove();\n                    console.log(`source of the link changed failed, was deleted`,this.get().states)\n                }\n            }\n        },\n        // Restore Graph utils\n        restoreState(jsonState) {\n            let uml = this.uml\n            const typeState = {\n                StartState : function(jsonState,self) {\n                    const state = new uml.StartState(jsonState.model)\n                    const fsaState = self.fsaJSON.addstate('init',jsonState.name,type)\n                    fsaState.get().model = state\n                    state.fsa = { type: 'state', item: fsaState}\n                    return state\n                },\n                EndState  : function(jsonState,self) {\n                    const state = new uml.EndState(jsonState.model)\n                    const fsaState = self.fsaJSON.addstate('final',jsonState.name,type)\n                    fsaState.get().model = state\n                    state.fsa = { type: 'state', item: fsaState}\n                    return state\n                },\n                State     : function(jsonState,self) {\n                    const state = new uml.State(jsonState.model)\n                    const fsaState = self.fsaJSON.addstate(jsonState.key,jsonState.name,type)\n                    fsaState.get().model = state\n                    state.fsa = { type: 'state', item: fsaState}\n                    return state\n                }\n            }\n            const type = jsonState.model.type.substring(jsonState.model.type.indexOf('.')+1)\n            console.log(`Restore State: `, jsonState.model)\n            this.graph.addCell(typeState[type](jsonState,this)) \n        },\n        restoreTrans(model,srcState,dstKey,transName) {\n            let uml = this.uml\n            const trans = new uml.Transition(model)\n            const fsaTrans = srcState.addtrans(transName,dstKey)\n            fsaTrans.get().model = trans\n            trans.fsa = { type: 'trans', item: fsaTrans, owner: srcState}\n            console.log(`Restore Trans: `, model)\n            this.graph.addCell(trans) \n            return fsaTrans\n        },\n        restoreGraph(states) {\n            if (states instanceof Object) {\n                for (let [key, state] of Object.entries(states)) {\n                    if (state.hasOwnProperty(\"model\"))\n                        this.restoreState(state)\n                }     \n                for (let [key, state] of Object.entries(states)) {\n                    if (state && state.hasOwnProperty(\"transitions\")) {\n                        state.transitions.forEach(trans => {\n                            const srcState = this.fsaJSON.statesDict[state.key]\n                            const fsaTrans = srcState.addtrans(trans.key,trans.nextstatename,trans)\n                            if (trans.hasOwnProperty(\"model\")) {\n                                const modelTrans = new this.uml.Transition(trans.model)\n                                modelTrans.fsa = { type: 'trans', item: fsaTrans, owner: srcState}\n                                this.graph.addCell(modelTrans) \n                            }\n                            /*\n                                this.restoreTrans(\n                                    trans.model,\n                                    this.fsaJSON.statesDict[state.key],\n                                    trans.nextstatename,\n                                    trans.key)\n                            */\n                        })                        \n                    } \n                } \n            } else {\n                console.warn(`Cannon Restore old style format`)\n            }  \n        }\n\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n//@import \"~@jointjs/dist/joint.css\";\n\n.container {\n    background-color:#f0ebeb6e;\n    margin: auto;\n    border-radius: 5px;\n    border: 2px solid black;\n    width: 100%; /* Full width */\n    height: 90vh; /* Full height */\n}\n\nnav {\n  background-color: #e3f2fd;\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  border: 2px solid black;\n//  width: 95%;\n  border-radius: 5px;\n  margin: 5px;\n  padding: 5px;\n}\n\n.btn {\n  background-color: DodgerBlue;\n  border: none;\n  color: white;\n  padding: 12px 15px;\n  cursor: pointer;\n  font-size: 20px;\n  border-radius: 5px; \n  margin: 3px;\n}\n\n/* Darker background on mouse-over */\n.btn:hover {\n  background-color: RoyalBlue;\n}\n\n/* The Modal (background) */\n.modal {\n    display: none; /* Hidden by default */\n    position: fixed; /* Stay in place */\n    z-index: 1; /* Sit on top */\n    padding-top: 100px; /* Location of the box */\n    left: 30%;\n    top: 10%;\n    width: 500px;\n//\topacity : 1.0;\n}\n\n/* Modal Content */\n.modal-content {\n    background-color:#6e6e6e6e;\n    margin: auto;\n    padding: 20px;\n    border: 2px solid black;\n    width: 90%;\n}\n\n/* The Close Button */\n.close {\n    color: #070707;\n    float: right;\n    font-size: 28px;\n    font-weight: bold;\n    position: absolute;\n    right: 20px;\n}\n\n.close:hover,\n.close:focus {\n    color: #000;\n    text-decoration: none;\n    cursor: pointer;\n}\nselect.modal-enter, input.modal-enter {\n    width: 50%;\n    padding: 12px 20px;\n    margin: 8px 0;\n    display: inline-block;\n    border: 2px solid black;\n    border-radius: 4px;\n    box-sizing: border-box;\n}\nbutton.modal-enter {\n\tborder-radius: 10px;\n    background-color: #88bbd4;\n\tborder: 2px solid #060606;\n    color: black;\n    padding: 16px 32px;\n    text-decoration: none;\n    margin: 4px 2px;\n    cursor: pointer;\n}\nbutton.modal-enter:hover {\n    background-color:rgb(4, 37, 54);\n    color: white;\n}\n\n.dropdown {\n  float: left;\n  overflow: hidden;\n}\n.dropdown .dropbtn {\n  font-size: 16px;  \n  border: none;\n  outline: none;\n  color: white;\n  padding: 14px 16px;\n  background-color: inherit;\n  font-family: inherit;\n  margin: 0;\n}\n.dropdown-content {\n  display: none;\n  position: absolute;\n  background-color: #f9f9f9;\n  min-width: 160px;\n  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n  z-index: 1;\n}\n.dropdown-content a {\n  float: none;\n  color: black;\n  padding: 12px 16px;\n  text-decoration: none;\n  display: block;\n  text-align: left;\n}\n.dropdown-content a:hover {\n  background-color: #ddd;\n}\n.dropdown:hover .dropdown-content {\n  display: block;\n}\n\n</style>","\nexport class jsonAction {\n    /* Constructor */\n    constructor(name,code) {\n        this.pattern = code ? {\n            name: name,\n            func: code            \n        } : {\n            name: name\n        }\n    }     \n    get() { return this.pattern } \n    addfunc(code) { \n        this.pattern.func = code\n    }\n}\n\nexport class jsonTrans {\n    /* Constructor */\n    constructor(name,nextstate,trans) {\n        this.pattern = trans ? trans :\n        {\n            key: name,\n            nextstatename: nextstate,\n            triggers: [],\n            effects: []            \n        }\n    }   \n    get() { return this.pattern }  \n    addtrigger(name, code) {\n        this.pattern.triggers.push((new jsonAction(name, code)).get())\n    } \n    addeffect(name, code) {\n        this.pattern.effects.push((new jsonAction(name, code)).get())        \n    } \n}\n\nexport class jsonState {\n    /* Constructor */\n    constructor(key,name,type) {\n        this.transDict = {}\n        this.pattern = {\n            key: key,\n            name: name                 \n        }\n        switch(type) {\n            case 'initialState':\n                this.pattern.key = 'init'\n                this.pattern.exits = [] \n                this.pattern.transitions = []   \n                break;\n            case 'finalState':\n                this.pattern.entries = []\n                break;\n            default:    \n                this.pattern.entries = []\n                this.pattern.stays = []\n                this.pattern.exits = []     \n                this.pattern.transitions = [] \n        }\n    }  \n    get() { return this.pattern }\n    setsuperstate(link) {\n        this.pattern.superstate = {\n            link: link\n        }\n    }\n    addentry(name, code) {\n        if (this.pattern.hasOwnProperty(\"entries\")) {\n            let item = this.pattern.entries.find(obj => obj.name == name)\n            if (item === undefined) {\n                let action = new jsonAction(name, code)\n                this.pattern.entries.push(action.get())    \n                return action\n            } else {\n                item.func = code\n                return null\n            }\n        } else return null        \n    }\n    addexit(name, code) {\n        if (this.pattern.hasOwnProperty(\"exits\")) {\n            let action = new jsonAction(name, code)\n            this.pattern.exits.push(action.get())  \n            return action \n        } else return null    \n    }\n    addstay(name, code) {\n        if (this.pattern.hasOwnProperty(\"stays\")) {\n            let action = new jsonAction(name, code)\n            this.pattern.stays.push(action.get())  \n            return action  \n        } else return null     \n    }    \n    addtrans(name,nextstate,transition) {\n        if (this.pattern.hasOwnProperty(\"transitions\")) {\n            let trans = new jsonTrans(name,nextstate,transition)\n            this.pattern.transitions.push(trans.get())  \n            this.transDict[name] = trans \n            return trans    \n        } else return null\n    }   \n    deltrans(name) {\n        if (this.pattern.hasOwnProperty(\"transitions\")) {\n            const translst = this.get().transitions  \n            for(var i = 0; i < translst.length; i++) {\n                const trans = translst[i]\n                if(trans.key === name) {\n                   translst.splice(i, 1)\n                   if(this.transDict.hasOwnProperty(name)) {\n                      delete this.transDict[name]                      \n                   }\n                   return true\n              }\n            }\n        } \n        return false       \n    }  \n    clonetrans(transition) {\n        if (this.pattern.hasOwnProperty(\"transitions\")) {\n            let trans = new jsonTrans('','',JSON.parse(JSON.stringify(transition)))\n            this.pattern.transitions.push(trans.get())   \n            return trans    \n        } else return null        \n    }\n}\n\nexport class jsonFSA {\n    /* Constructor */\n    constructor(id,project) {\n        this.pattern = {\n            id: id,\n            type: \"FSM\",\n            prj: project,\n            complete: false,\n            start: {},\n            stop: {},\n            countstates: 0,\n            //states: []  \n            states: {}          \n        }\n        this.statesDict = {}\n        this.stroke = [\n            '#d0c4f4',\n            '#f46b6d',\n            '#5d8dbe',\n            '#F4D03F',\n            '#66bc84',\n            '#e6b362',\n            '#80c5e2'\n        ]\n    }   \n    reset() {\n        this.pattern.start = {}\n        this.pattern.stop  = {}\n        this.pattern.countstates = 0\n        this.pattern.states = {}          \n        this.statesDict = {}\n    }\n    get() { return this.pattern }\n    addstate(key,name,type) {\n    /*    \n        let state = this.pattern.states.push((new jsonState(key,name,type)).get()) \n        this.pattern.countstates ++\n        return this.pattern.states[state-1]\n    */    \n        let state = new jsonState(key,name,type)\n        this.pattern.states[key] = state.get()\n        this.pattern.countstates ++\n        this.statesDict[key] = state\n        return state\n    }\n    delstate(key) { \n    /*           \n        let item = null\n        for (let i=0; i<this.pattern.states.length; i++) {\n            item = this.pattern.states[i]\n            if (item.key === key) {\n                this.pattern.states.splice(i, 1)\n                break\n            }\n        } \n    */     \n        if (this.pattern.states.hasOwnProperty(key)) {\n            delete this.pattern.states[key]\n            this.pattern.countstates -- \n            if (this.statesDict.hasOwnProperty(key))\n                delete this.statesDict[key]\n        }                       \n    }\n    addstart(name, code) {\n        this.pattern.start = (new jsonAction(name, code)).get()  \n    }\n    addstop(name, code) {\n        this.pattern.stop = (new jsonAction(name, code)).get()\n    }\n    genColor() {        \n        const letters = '0123456789ABCDEF';\n        let color = '#';\n        for (let i = 0; i < 6; i++) {\n            color += letters[Math.floor(Math.random() * 16)];\n        }\n        return color;    \n    }    \n}\n","import FileSaver from 'file-saver'\n\nexport default class projFSA {\n    /* Constructor */\n    constructor(name) {\n        this._prjname_ = name || 'project'\n        this._extension_ = 'dafsm'\n    }\n\n    read(file,handle) {\n        let reader = new FileReader();\n        reader.readAsText(file);\n        reader.onload = function() {\n          console.log(reader.result);\n          if (handle) handle(reader.result);\n        };  \n        reader.onerror = function() {\n          console.log(reader.error);\n        };\n    }\n    save(context,filename) {\n        const fname = filename || `${this._prjname_}.${this._extension_}`\n        const file = new File([context],fname,{type: \"text/plain;charset=utf-8\"});\n        FileSaver.saveAs(file);          \n    }\n}","import { render } from \"./Graph.vue?vue&type=template&id=f7d7e86e&scoped=true\"\nimport script from \"./Graph.vue?vue&type=script&lang=js\"\nexport * from \"./Graph.vue?vue&type=script&lang=js\"\n\nimport \"./Graph.vue?vue&type=style&index=0&id=f7d7e86e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-f7d7e86e\"\n\nexport default script","import { render } from \"./App.vue?vue&type=template&id=322c0829\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=322c0829&lang=scss\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Graph.vue?vue&type=style&index=0&id=f7d7e86e&lang=scss&scoped=true\"","function validTransition(state) {\n    const transitions = {}\n    if (state && state.hasOwnProperty(\"transitions\")) {\n        state.transitions.forEach(trans => {\n            transitions[trans.key] = {\n                nextstatename: trans.nextstatename,\n            }\n            console.log(`Trans[${trans.key}]:`, trans)    \n            if (trans.hasOwnProperty(\"triggers\")) {\n                trans.triggers.forEach(trig => {\n                    transitions[trans.key].input = trig.name\n                })\n            }\n            if (trans.hasOwnProperty(\"effects\")) {\n                trans.effects.forEach(eff => {\n                    transitions[trans.key].output = eff.name\n                })\n            }\n        })                        \n    }\n    return transitions\n}\n\nfunction validArrayStates(states,ejstates) {\n    states.forEach(state => {\n        ejstates[key] = {\n            key: key,\n            transitions: validTransition(state)\n        }        \n    })\n}\n\nfunction validObjectStates(states,ejstates) {\n    for (let [key, state] of Object.entries(states)) {\n        ejstates[key] = {\n            key: key,\n            transitions: validTransition(state)\n        }\n    }\n}\n\nmodule.exports = {\n    build: (logic) => {\n        const template = {\n            id : logic.id,\n            prj: logic.prj,\n            states: {}\n        }\n\n        try {\n            const states = logic['states']\n            if (states instanceof Array) {\n                validArrayStates(states,template['states'])\n            } else if (states instanceof Object) {\n                validObjectStates(states,template['states'])\n            } else {      \n                console.error('Not compatible States')\n            }\n        } catch(e) {\n            console.fatal(`Build Execute JSON ERROR: in ${logic[\"id\"]} >` + e.name + \":\" + e.message + \"\\n\" + e.stack)\n        } finally {\n            return template\n        } \n    }\n};"],"sourceRoot":""}